#%RAML 1.0
title: CMS Demo API
version: v1
baseUri: http://localhost:8081/api
mediaType: application/json
description: Customer Management System Demo API for Financial Services

types:
  Customer:
    type: object
    properties:
      customerId:
        type: string
        required: true
        description: Unique customer identifier
        example: "CUST-12345"
      firstName:
        type: string
        required: true
        description: Customer first name
        example: "John"
      lastName:
        type: string
        required: true
        description: Customer last name
        example: "Smith"
      taxId:
        type: string
        required: false
        description: Tax identification number
        example: "123-45-6789"
      dateOfBirth:
        type: date-only
        required: false
        description: Customer date of birth
        example: "1985-03-15"
      email:
        type: string
        required: true
        description: Customer email address
        example: "john.smith@example.com"
      phone:
        type: string
        required: false
        description: Customer phone number
        example: "+1-555-123-4567"
      accountType:
        type: string
        required: true
        enum: ["CHECKING", "SAVINGS", "INVESTMENT", "LOAN", "CREDIT_CARD"]
        description: Primary account type
        example: "CHECKING"
      kycStatus:
        type: string
        required: true
        enum: ["PENDING", "VERIFIED", "REJECTED", "EXPIRED"]
        description: Know Your Customer verification status
        example: "VERIFIED"
      riskRating:
        type: string
        required: true
        enum: ["LOW", "MEDIUM", "HIGH"]
        description: Customer risk rating for compliance
        example: "LOW"
      customerSince:
        type: date-only
        required: false
        description: Date customer relationship started
        example: "2020-01-15"
      status:
        type: string
        required: true
        enum: ["ACTIVE", "INACTIVE", "SUSPENDED", "CLOSED"]
        description: Customer account status
        example: "ACTIVE"
      address:
        type: object
        required: false
        properties:
          street:
            type: string
            example: "123 Main Street"
          city:
            type: string
            example: "New York"
          state:
            type: string
            example: "NY"
          zipCode:
            type: string
            example: "10001"
          country:
            type: string
            example: "USA"

  CustomerInput:
    type: object
    properties:
      firstName:
        type: string
        required: true
      lastName:
        type: string
        required: true
      taxId:
        type: string
        required: false
      dateOfBirth:
        type: date-only
        required: false
      email:
        type: string
        required: true
      phone:
        type: string
        required: false
      accountType:
        type: string
        required: true
        enum: ["CHECKING", "SAVINGS", "INVESTMENT", "LOAN", "CREDIT_CARD"]
      address:
        type: object
        required: false
        properties:
          street: string
          city: string
          state: string
          zipCode: string
          country: string

  Card:
    type: object
    properties:
      cardId:
        type: string
        required: true
        description: Unique card identifier
        example: "CARD-78901"
      customerId:
        type: string
        required: true
        description: Associated customer ID
        example: "CUST-12345"
      cardNumber:
        type: string
        required: true
        description: Masked card number
        example: "**** **** **** 1234"
      cardType:
        type: string
        required: true
        enum: ["CREDIT", "DEBIT", "PREPAID"]
        description: Type of card
        example: "CREDIT"
      expirationDate:
        type: string
        required: true
        description: Card expiration date (MM/YY)
        example: "12/25"
      cardStatus:
        type: string
        required: true
        enum: ["ACTIVE", "BLOCKED", "EXPIRED", "PENDING_ACTIVATION"]
        description: Current card status
        example: "ACTIVE"
      creditLimit:
        type: number
        required: false
        description: Credit limit for credit cards
        example: 10000
      availableCredit:
        type: number
        required: false
        description: Available credit balance
        example: 8500
      issuedDate:
        type: date-only
        required: false
        description: Date card was issued
        example: "2020-06-15"

  CardInput:
    type: object
    properties:
      customerId:
        type: string
        required: true
      cardType:
        type: string
        required: true
        enum: ["CREDIT", "DEBIT", "PREPAID"]
      creditLimit:
        type: number
        required: false

  ErrorResponse:
    type: object
    properties:
      error:
        type: string
        required: true
        description: Error type
      message:
        type: string
        required: true
        description: Human-readable error message
      timestamp:
        type: datetime
        required: true
        description: Error timestamp
      path:
        type: string
        required: false
        description: Request path that caused the error

/customers:
  get:
    description: Retrieve all customers with optional filtering
    queryParameters:
      accountType:
        type: string
        required: false
        enum: ["CHECKING", "SAVINGS", "INVESTMENT", "LOAN", "CREDIT_CARD"]
        description: Filter by account type
      status:
        type: string
        required: false
        enum: ["ACTIVE", "INACTIVE", "SUSPENDED", "CLOSED"]
        description: Filter by customer status
      kycStatus:
        type: string
        required: false
        enum: ["PENDING", "VERIFIED", "REJECTED", "EXPIRED"]
        description: Filter by KYC status
    responses:
      200:
        body:
          application/json:
            type: Customer[]
            example: |
              [
                {
                  "customerId": "CUST-12345",
                  "firstName": "John",
                  "lastName": "Smith",
                  "taxId": "123-45-6789",
                  "dateOfBirth": "1985-03-15",
                  "email": "john.smith@example.com",
                  "phone": "+1-555-123-4567",
                  "accountType": "CHECKING",
                  "kycStatus": "VERIFIED",
                  "riskRating": "LOW",
                  "customerSince": "2020-01-15",
                  "status": "ACTIVE",
                  "address": {
                    "street": "123 Main Street",
                    "city": "New York",
                    "state": "NY",
                    "zipCode": "10001",
                    "country": "USA"
                  }
                }
              ]
      400:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse

  post:
    description: Create a new customer record
    body:
      application/json:
        type: CustomerInput
        example: |
          {
            "firstName": "Jane",
            "lastName": "Doe",
            "taxId": "987-65-4321",
            "dateOfBirth": "1990-07-22",
            "email": "jane.doe@example.com",
            "phone": "+1-555-987-6543",
            "accountType": "SAVINGS",
            "address": {
              "street": "456 Oak Avenue",
              "city": "Boston",
              "state": "MA",
              "zipCode": "02101",
              "country": "USA"
            }
          }
    responses:
      201:
        body:
          application/json:
            type: Customer
            example: |
              {
                "customerId": "CUST-67890",
                "firstName": "Jane",
                "lastName": "Doe",
                "taxId": "987-65-4321",
                "dateOfBirth": "1990-07-22",
                "email": "jane.doe@example.com",
                "phone": "+1-555-987-6543",
                "accountType": "SAVINGS",
                "kycStatus": "PENDING",
                "riskRating": "LOW",
                "customerSince": "2025-10-09",
                "status": "ACTIVE",
                "address": {
                  "street": "456 Oak Avenue",
                  "city": "Boston",
                  "state": "MA",
                  "zipCode": "02101",
                  "country": "USA"
                }
              }
      400:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse

  /{id}:
    uriParameters:
      id:
        type: string
        description: Customer unique identifier
        example: "CUST-12345"
    
    get:
      description: Retrieve a specific customer by ID
      responses:
        200:
          body:
            application/json:
              type: Customer
              example: |
                {
                  "customerId": "CUST-12345",
                  "firstName": "John",
                  "lastName": "Smith",
                  "taxId": "123-45-6789",
                  "dateOfBirth": "1985-03-15",
                  "email": "john.smith@example.com",
                  "phone": "+1-555-123-4567",
                  "accountType": "CHECKING",
                  "kycStatus": "VERIFIED",
                  "riskRating": "LOW",
                  "customerSince": "2020-01-15",
                  "status": "ACTIVE",
                  "address": {
                    "street": "123 Main Street",
                    "city": "New York",
                    "state": "NY",
                    "zipCode": "10001",
                    "country": "USA"
                  }
                }
        404:
          body:
            application/json:
              type: ErrorResponse
              example: |
                {
                  "error": "NOT_FOUND",
                  "message": "Customer with ID CUST-12345 not found",
                  "timestamp": "2025-10-09T10:30:00Z",
                  "path": "/api/customers/CUST-12345"
                }
        500:
          body:
            application/json:
              type: ErrorResponse

    put:
      description: Update an existing customer
      body:
        application/json:
          type: CustomerInput
          example: |
            {
              "firstName": "John",
              "lastName": "Smith-Jones",
              "taxId": "123-45-6789",
              "dateOfBirth": "1985-03-15",
              "email": "john.smithjones@example.com",
              "phone": "+1-555-123-4567",
              "accountType": "INVESTMENT",
              "address": {
                "street": "789 Elm Street",
                "city": "New York",
                "state": "NY",
                "zipCode": "10002",
                "country": "USA"
              }
            }
      responses:
        200:
          body:
            application/json:
              type: Customer
        404:
          body:
            application/json:
              type: ErrorResponse
        400:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse

    delete:
      description: Delete a customer record
      responses:
        204:
          description: Customer successfully deleted
        404:
          body:
            application/json:
              type: ErrorResponse
              example: |
                {
                  "error": "NOT_FOUND",
                  "message": "Customer with ID CUST-12345 not found",
                  "timestamp": "2025-10-09T10:30:00Z",
                  "path": "/api/customers/CUST-12345"
                }
        500:
          body:
            application/json:
              type: ErrorResponse
/cards:
  get:
    description: Retrieve all cards with optional filtering
    queryParameters:
      cardType:
        type: string
        required: false
        enum: ["CREDIT", "DEBIT", "PREPAID"]
        description: Filter by card type
      cardStatus:
        type: string
        required: false
        enum: ["ACTIVE", "BLOCKED", "EXPIRED", "PENDING_ACTIVATION"]
        description: Filter by card status
      customerId:
        type: string
        required: false
        description: Filter by customer ID
    responses:
      200:
        body:
          application/json:
            type: Card[]
            example: |
              [
                {
                  "cardId": "CARD-78901",
                  "customerId": "CUST-12345",
                  "cardNumber": "**** **** **** 1234",
                  "cardType": "CREDIT",
                  "expirationDate": "12/25",
                  "cardStatus": "ACTIVE",
                  "creditLimit": 10000,
                  "availableCredit": 8500,
                  "issuedDate": "2020-06-15"
                }
              ]
      400:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse

  post:
    description: Create a new card record
    body:
      application/json:
        type: CardInput
        example: |
          {
            "customerId": "CUST-12345",
            "cardType": "CREDIT",
            "creditLimit": 10000
          }
    responses:
      201:
        body:
          application/json:
            type: Card
      400:
        body:
          application/json:
            type: ErrorResponse
      500:
        body:
          application/json:
            type: ErrorResponse

  /{id}:
    uriParameters:
      id:
        type: string
        description: Card unique identifier
        example: "CARD-78901"
    
    get:
      description: Retrieve a specific card by ID
      responses:
        200:
          body:
            application/json:
              type: Card
        404:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse

    put:
      description: Update an existing card
      body:
        application/json:
          type: CardInput
      responses:
        200:
          body:
            application/json:
              type: Card
        404:
          body:
            application/json:
              type: ErrorResponse
        400:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse

    delete:
      description: Delete a card record
      responses:
        204:
          description: Card successfully deleted
        404:
          body:
            application/json:
              type: ErrorResponse
        500:
          body:
            application/json:
              type: ErrorResponse
